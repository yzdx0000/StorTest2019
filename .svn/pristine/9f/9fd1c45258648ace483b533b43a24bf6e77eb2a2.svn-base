#-*-coding:utf-8 -*
#!/usr/bin/python
import os
import xml.dom.minidom
import getoutputpath_lyz

def get_xml():
    output=getoutputpath_lyz.getoutputpath()
    fileAllObjectsallpath=os.path.join(output,'fileAllObjects')
    f = open(fileAllObjectsallpath)
    lines = f.readlines()
    count = 0
    for line in lines:
        if line.startswith('<?xml'):
            break
        else:
            count = count + 1
    xml_lst = lines[count:]
    f.close()
    xml_string = ''.join(xml_lst)
    #print xml_string
    return xml_string

def analyze_xml():
    xml_string = get_xml()
    keys=[]
    xml_info = xml.dom.minidom.parseString(xml_string)
    contents_info = xml_info.getElementsByTagName('Contents')
    for content_info in contents_info:
        key = content_info.getElementsByTagName('Key')[0].firstChild.nodeValue
        LastModified = content_info.getElementsByTagName('LastModified')[0].firstChild.nodeValue
        #print key
	keys.append(key)
        #print LastModified
    #print keys
    return keys

if __name__ == '__main__':
    analyze_xml()
