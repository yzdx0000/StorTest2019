name=$2
xml_name=$1
dst_file=$3
acc_id=`parastor_pos addaccount accountname=acc_dws_$name email=diws_$name@sugon.com | awk -F '[:|#]' '{print $4}'`
acc_id_len=`echo $acc_id | wc -c `
if [ $acc_id_len -ne 17 ]
then
	echo add account failed,account is exist.
	exit 1
fi
echo add account id is :$acc_id
tmp=`parastor_pos addcertificate accountid=$acc_id`
cer_id=`echo $tmp | awk -F '[:|#]' '{print $4}'`
cer=`echo $tmp | awk -F '[:|#]' '{print $6}'`
echo new cer_id=$cer_id
echo new cer=$cer
prefix="dws$name"
echo $prefix
old_cer_id=`grep accesskey $xml_name | sed -n 1p | awk -F '[=|;]' '{print $4}'`
old_cer=`grep accesskey $xml_name | sed -n 1p | awk -F '[=|;]' '{print $6}'`
old_prefix=`grep cprefix $xml_name | sed -n 1p | awk -F '[=|;|"]' '{print $10}'`
echo old_cer_id=$old_cer_id
echo odl_ser=$old_cer
sed -i "s/$old_cer_id/$cer_id/g" $xml_name
sed -i "s/$old_cer/$cer/g" $xml_name
sed -i "s/$old_prefix/$prefix/g" $xml_name
scp $xml_name $dst_file
#scp $xml_name 193.169.11.17:/none/cosbench/0.4.2.c4/conf/mine_confs
